import{j as h,a as y}from"./jsx-runtime-37f7df21.js";import{c as F,B as E}from"./Button-ab0893ea.js";import{R as te,r as g}from"./index-f1f2c4b1.js";import{a as le}from"./utils-8b0f2dd3.js";import"./Screen-f628b542.js";import"./DiveTransition-32aed59f.js";import"./inheritsLoose-c82a83d4.js";import"./index-c74c9f7f.js";const oe=""+new URL("isles-5c297034.png",import.meta.url).href;/**
 * filesize
 *
 * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 10.0.12
 */const ae="array",ce="bit",K="bits",se="byte",Z="bytes",N="",ue="exponent",de="function",A="iec",fe="Invalid number",me="Invalid rounding method",T="jedec",he="object",q=".",ve="round",pe="s",ge="kbit",ye="kB",we=" ",_e="string",Se="0",k={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function be(i,{bits:e=!1,pad:r=!1,base:t=-1,round:n=2,locale:u=N,localeOptions:l={},separator:o=N,spacer:m=we,symbols:s={},standard:a=N,output:f=_e,fullform:p=!1,fullforms:v=[],exponent:w=-1,roundingMethod:D=ve,precision:R=0}={}){let d=w,b=Number(i),c=[],S=0,j=N;t===-1&&a.length===0?(t=10,a=T):t===-1&&a.length>0?(a=a===A?A:T,t=a===A?2:10):(t=t===2?2:10,a=t===10||a===T?T:A);const I=t===10?1e3:1024,ie=p===!0,z=b<0,U=Math[D];if(typeof i!="bigint"&&isNaN(i))throw new TypeError(fe);if(typeof U!==de)throw new TypeError(me);if(z&&(b=-b),(d===-1||isNaN(d))&&(d=Math.floor(Math.log(b)/Math.log(I)),d<0&&(d=0)),d>8&&(R>0&&(R+=8-d),d=8),f===ue)return d;if(b===0)c[0]=0,j=c[1]=k.symbol[a][e?K:Z][d];else{S=b/(t===2?Math.pow(2,d*10):Math.pow(1e3,d)),e&&(S=S*8,S>=I&&d<8&&(S=S/I,d++));const C=Math.pow(10,d>0?n:0);c[0]=U(S*C)/C,c[0]===I&&d<8&&w===-1&&(c[0]=1,d++),j=c[1]=t===10&&d===1?e?ge:ye:k.symbol[a][e?K:Z][d]}if(z&&(c[0]=-c[0]),R>0&&(c[0]=c[0].toPrecision(R)),c[1]=s[c[1]]||c[1],u===!0?c[0]=c[0].toLocaleString():u.length>0?c[0]=c[0].toLocaleString(u,l):o.length>0&&(c[0]=c[0].toString().replace(q,o)),r&&Number.isInteger(c[0])===!1&&n>0){const C=o||q,W=c[0].toString().split(C),Y=W[1]||N,G=Y.length,ne=n-G;c[0]=`${W[0]}${C}${Y.padEnd(G+ne,Se)}`}return ie&&(c[1]=v[d]?v[d]:k.fullform[a][d]+(e?ce:se)+(c[0]===1?N:pe)),f===ae?c:f===he?{value:c[0],symbol:c[1],exponent:d,unit:j}:c.join(m)}function L(i,e){var r,t;if(i===e)return!0;if(i&&e&&(r=i.constructor)===e.constructor){if(r===Date)return i.getTime()===e.getTime();if(r===RegExp)return i.toString()===e.toString();if(r===Array&&(t=i.length)===e.length){for(;t--&&L(i[t],e[t]););return t===-1}if(r===Object){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(t in i)if(!(t in e)||!L(i[t],e[t]))return!1;return!0}}return i!==i&&e!==e}function Ee(i){const e=te.useRef([]);return L(i,e.current)||(e.current=i),e.current}function Ne(i,e){return te.useMemo(i,Ee(e))}function Ce(i,e,r,t){const n=g.useRef(r);n.current=r;const u=Ne(()=>t,[t]);g.useEffect(()=>{if(!i)return;const l=o=>n.current.call(i,o);return i.addEventListener(e,l,u),()=>{i.removeEventListener(e,l,u)}},[i,e,u])}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Te=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],O=Te.join(","),re=typeof Element>"u",B=re?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,P=!re&&Element.prototype.getRootNode?function(i){var e;return i==null||(e=i.getRootNode)===null||e===void 0?void 0:e.call(i)}:function(i){return i==null?void 0:i.ownerDocument},x=function i(e,r){var t;r===void 0&&(r=!0);var n=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"inert"),u=n===""||n==="true",l=u||r&&e&&i(e.parentNode);return l},Be=function(e,r,t){if(x(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(O));return r&&B.call(e,O)&&n.unshift(e),n=n.filter(t),n},De=function i(e,r,t){for(var n=[],u=Array.from(e);u.length;){var l=u.shift();if(!x(l,!1))if(l.tagName==="SLOT"){var o=l.assignedElements(),m=o.length?o:l.children,s=i(m,!0,t);t.flatten?n.push.apply(n,s):n.push({scopeParent:l,candidates:s})}else{var a=B.call(l,O);a&&t.filter(l)&&(r||!e.includes(l))&&n.push(l);var f=l.shadowRoot||typeof t.getShadowRoot=="function"&&t.getShadowRoot(l),p=!x(f,!1)&&(!t.shadowRootFilter||t.shadowRootFilter(l));if(f&&p){var v=i(f===!0?l.children:f.children,!0,t);t.flatten?n.push.apply(n,v):n.push({scopeParent:l,candidates:v})}else u.unshift.apply(u,l.children)}}return n},Re=function(e){return e.tagName==="INPUT"},Ie=function(e){return Re(e)&&e.type==="hidden"},Ae=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(t){return t.tagName==="SUMMARY"});return r},Me=function(e){var r,t=e&&P(e),n=(r=t)===null||r===void 0?void 0:r.host,u=!1;if(t&&t!==e){var l,o,m;for(u=!!((l=n)!==null&&l!==void 0&&(o=l.ownerDocument)!==null&&o!==void 0&&o.contains(n)||e!=null&&(m=e.ownerDocument)!==null&&m!==void 0&&m.contains(e));!u&&n;){var s,a,f;t=P(n),n=(s=t)===null||s===void 0?void 0:s.host,u=!!((a=n)!==null&&a!==void 0&&(f=a.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return u},V=function(e){var r=e.getBoundingClientRect(),t=r.width,n=r.height;return t===0&&n===0},xe=function(e,r){var t=r.displayCheck,n=r.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var u=B.call(e,"details>summary:first-of-type"),l=u?e.parentElement:e;if(B.call(l,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof n=="function"){for(var o=e;e;){var m=e.parentElement,s=P(e);if(m&&!m.shadowRoot&&n(m)===!0)return V(e);e.assignedSlot?e=e.assignedSlot:!m&&s!==e.ownerDocument?e=s.host:e=m}e=o}if(Me(e))return!e.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return V(e);return!1},je=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var t=0;t<r.children.length;t++){var n=r.children.item(t);if(n.tagName==="LEGEND")return B.call(r,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}r=r.parentElement}return!1},$=function(e,r){return!(r.disabled||x(r)||Ie(r)||xe(r,e)||Ae(r)||je(r))},ke=function(e,r){r=r||{};var t;return r.getShadowRoot?t=De([e],r.includeContainer,{filter:$.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):t=Be(e,r.includeContainer,$.bind(null,r)),t};const Fe="_root_14ojz_1",Le="_content_14ojz_7",Oe="_world_root_14ojz_20",Pe="_world_info_14ojz_27",ze="_world_image_14ojz_33",Ue="_world_focused_14ojz_38",We="_title_14ojz_42",_={root:Fe,content:Le,world_root:Oe,world_info:Pe,world_image:ze,world_focused:Ue,title:We},Ye="_container_acsky_1",Ge="_input_acsky_10",J={container:Ye,input:Ge},Ke=({autoFocus:i,...e})=>{const r=g.useRef(null),t=le();return g.useEffect(()=>{!i||t||r.current.focus()},[]),h("div",{className:J.container,children:h("input",{ref:r,className:J.input,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",autoSave:"off",spellCheck:"false",...e})})};try{Input.displayName="Input",Input.__docgenInfo={description:"",displayName:"Input",props:{autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}}}}}catch{}const Ze=({name:i,isFocused:e,title:r,lastPlayed:t,size:n,detail:u="",onFocus:l,onInteraction:o})=>{const m=g.useMemo(()=>{if(!t)return;const a=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),f=Date.now()-t,p=Math.floor(f/1e3/60),v=Math.floor(p/60),w=Math.floor(v/24);return w>0?a.format(-w,"day"):v>0?a.format(-v,"hour"):a.format(-p,"minute")},[t]),s=g.useMemo(()=>{if(n)return be(n)},[n]);return y("div",{className:F(_.world_root,e?_.world_focused:void 0),tabIndex:0,onFocus:()=>l==null?void 0:l(i),onKeyDown:a=>{(a.code==="Enter"||a.code==="Space")&&(a.preventDefault(),o==null||o(a.code==="Enter"?"enter":"space"))},onDoubleClick:()=>o==null?void 0:o("enter"),children:[h("img",{className:_.world_image,src:oe}),y("div",{className:_.world_info,children:[h("div",{className:_.world_title,title:"level.dat world name",children:r}),y("div",{className:"muted",children:[m," ",u.slice(-30)]}),h("div",{className:"muted",children:s})]})]})},X=({worldData:i,onGeneralAction:e,onWorldAction:r})=>{const t=g.useRef(),n=g.useRef(null);Ce(window,"keydown",s=>{if(s.code==="ArrowDown"||s.code==="ArrowUp"){s.preventDefault();const a=s.code==="ArrowDown"?1:-1,f=ke(t.current),p=f.indexOf(document.activeElement);if(p===-1)return;const v=f[p+a];v==null||v.focus()}});const[u,l]=g.useState(""),[o,m]=g.useState("");return y("div",{ref:t,children:[h("div",{className:"dirt-bg"}),y("div",{className:F("fullscreen",_.root),children:[y("div",{style:{display:"flex",flexDirection:"column"},children:[h("span",{className:F("screen-title",_.title),children:"Select Saved World"}),h(Ke,{autoFocus:!0,value:u,onChange:({target:{value:s}})=>l(s)})]}),h("div",{className:_.content,children:i.filter(s=>s.title.toLowerCase().includes(u.toLowerCase())).map(({name:s,title:a,size:f,lastPlayed:p,detail:v})=>h(Ze,{title:a,lastPlayed:p,size:f,name:s,onFocus:m,isFocused:o===s,onInteraction:w=>{var D;w==="enter"?r("load",s):w==="space"&&((D=n.current)==null||D.focus())},detail:v},s))}),y("div",{style:{display:"flex",flexDirection:"column",minWidth:400},children:[y("div",{children:[h(E,{rootRef:n,disabled:!o,onClick:()=>r("load",o),children:"LOAD WORLD"}),h(E,{onClick:()=>e("create"),children:"Create New World"})]}),y("div",{children:[h(E,{style:{width:100},disabled:!o,onClick:()=>r("export",o),children:"Export"}),h(E,{style:{width:100},disabled:!o,onClick:()=>r("delete",o),children:"Delete"}),h(E,{style:{width:100},onClick:()=>r("edit",o),disabled:!0,children:"Edit"}),h(E,{style:{width:100},onClick:()=>e("cancel"),children:"Cancel"})]})]})]})]})};try{Singleplayer.displayName="Singleplayer",Singleplayer.__docgenInfo={description:"",displayName:"Singleplayer",props:{worldData:{defaultValue:null,description:"",name:"worldData",required:!0,type:{name:"WorldProps[]"}},onWorldAction:{defaultValue:null,description:"",name:"onWorldAction",required:!0,type:{name:'(action: "load" | "export" | "delete" | "edit", worldName: string) => void'}},onGeneralAction:{defaultValue:null,description:"",name:"onGeneralAction",required:!0,type:{name:'(action: "cancel" | "create") => void'}}}}}catch{}const tt={component:X,render({open:i}){return h(X,{worldData:Array.from({length:100}).map((e,r)=>({name:"test"+r,title:"Test Save "+r,lastPlayed:Date.now()-6e5,size:1e5})),onWorldAction:()=>{},onGeneralAction:()=>{}})}},M={args:{}};var Q,H,ee;M.parameters={...M.parameters,docs:{...(Q=M.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {}
}`,...(ee=(H=M.parameters)==null?void 0:H.docs)==null?void 0:ee.source}}};const rt=["Primary"];export{M as Primary,rt as __namedExportsOrder,tt as default};
//# sourceMappingURL=Singleplayer.stories-32e2a89f.js.map
